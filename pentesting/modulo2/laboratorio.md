**Identificación de un objetivo con opciones ICMP y nping**

Nping es parte del proyecto nmap (la cuál será una herramienta que te ayudará mucho en tu proceso de pentesting) y puede ayudarte a encontrar información muy interesante de un objetivo haciendo un análisis de la traza de paquetes enviados y recibidos hacia un objetivo público. 

Para usarlo en esta parte del laboratorio debes seguir los siguientes pasos:

1. Ejecuta el comando *nping --echo-client "public" --tcp -p1-1024 --flags a echo.nmap.org* 
2. Comprueba la informacion obtenida de esta ejecucion inicial y la informacion que puedes obtener, entiendes lo que está sucediendo con la herramienta ? quieres discutirlo en Telegram ?
3. Consideras que esta técnica es activa o pasiva ?, conoces la diferencia ? 
4. Ejecuta el comando *nping -icmp -icmp-type echo -icmp-id 313 -icmp-seq 11 scanme.nmap.org 
5. Con este comando estas realizando una modificación de parametros de un **ICMP ECHO REQUEST** con el fin de personalizarlo y manejar la información que intercambia con el objetivo planteado
6. Ejecuta el comando *nping -icmp -icmp-type echo-reply scanme.nmap.org 
7. Identifica el tipo de peticion que estas realizando junto a la respuesta que recibes de tu objetivo
8. Ejecuta el comando *nping -c 1 --echo-client "public" scanme.nmap.org*

Esta opción es una de las mas interesante de **nping** porque te permite identificar la comunicacion entre las partes y detectar los siguientes elementos:

**SENT** - la información enviada desde el dispositivo hacia el servidor
**RCVD** - datos recibidos por el cliente desde el servidor

Puedes crear paquetes de una forma sencilla con nping por ejemplo un paquete **TCP** con la bandera **SYN** hacia el puerto 80 del servidor echo.nmap.org con el comando *nping --tcp -flags syn -p80 -c 1 echo.nmap.org* sobre banderas en el protocolo y construcción de paquetes hablaremos más a profundidad en el siguiente módulo, esto es solo una introducción a lo que puedes realizar con nping.

**Footprinting usando dig**

**dig** es una excelente herramienta para entornos **Unix** que puede ser usada para realizar peticiones a servidores DNS. Gran parte de la información que se puede obtener por medio de la herramienta te permite determinar información de DNS valiosa dentro de las actividades de Footprinting. Las transferencias de zona no son muy comunes, debido a configuraciones propias de los servidores DNS, pero aún es posible encontrar ciertas configuraciones vulnerables como en el caso del dominio zonetransfer.me

1.Determina los servidores DNS de un dominio a tu elección con el comando *dig behacker.pro NS* para este ejemplo el dominio que elegimos es **behacker.pro**, cuál vas a elegir tú ?
2. Con los registros **NS** intenta realizar una transferencia de zona, haciendo una petición recursiva contra el dominio ejecutando el comando *dig **@name_server** (el name server lo obtiene corriendo   comando dig dominio NS) **dominio** AXFR* por ejemplo para el dominio **behacker.pro** ejecuta *dig @ns37.domaincontrol.com behacker.pro AXFR
3. Revisa los resultados, entiendes lo que estas haciendo con este comando ?
4. Determina los servidores DNS del dominio zonetransfer.me
5. La determinación de DNS la puedes realizar haciendo uso de DNS raíz como los de Google y dig con la petición *dig @8.8.8.8 zonetransfer.me NS
6. Con los name servers identificados intente realizar una transferencia de zona con el comando *dig **@name_server** (obtenido en el paso anterior) AXFR zonetranfer.me
7. Revisa los resultados, encuentras algo diferente ?
8. Intenta hacer peticiones DNS para otros dominos que elijas y registros de los que estudiaste en la parte teórica de este módulo

Una excelente herramienta para recolección de información de los DNS es dnsrecon, disponible en Kali Linux y Parrot Linux, ejecuta el comando dnsrecon permite ver su ayuda para usarla... tienes preguntas de como usarla ? No dudes en hacerlo en el grupo de **Telegram**

**Google Hacking Database**

1. Accede al sitio https://www.exploit-db.com/google-hacking-database
2. Accede a la sección Files Containing Passwords
3. Realiza una búsqueda recursiva en google que le permite descubrir contraseñas, no sabes como hacerlo ? Podemos discutirlo en **Telegram
4. Posteriormente accede a la sección Various Online Devices
5. Realiza una búsqueda que te permita encontrar una cámara que se encuentre transmitiendo en vivo

Algunas búsquedas interesantes adicionales que te recomiendo hacer en Google y probar sus resultados son:

*inurl:view/view.shtml^
inurl:/mjpg/1/video.mjpg
inurl:user_view_S.htm
inurl:image?cachebust=
inurl:/control/userimage
filetype:sql
intitle:"VNC viewer for Java"
inurl:"exchange/logon.asp"
inurl:"owa/auth/logon.aspx"
intitle:"index of /" "parent directory" "Microsoft-IIS/7.5"*

Qué pudiste encontrar con estas búsquedas ? Te invito a que nos cuentes en **Telegram**

**Reconocimiento con Shodan**

1. Haciendo uso de [Shodan](https://www.shodan.io) vamos a encontrar información haciendo búsquedas simples, por ejemplo servidores PHP disponibles en Internet colocando la palabra ***PHP*** en la caja de búsqueda 
2. También con shodan podemos realizar búsquedas en el título de un servicio o aplicación, busca ***phpinfo.php*** e intenta definir la diferencia de tu primera búsqueda y esta, no la encuentras ? Te esperamos en **Telegram** para discutirla.
3. En www.shodan.io realiza la búsqueda ***cisco ios***
4. Realiza la búsqueda del término ***default passwords***
5. Comparte un poco de tus resultados en el grupo de **Telegram**

**Netcraft**

Existen excelentes fuentes de información como netcraft, puedes realizar una búsqueda de un dominio o de un sitio usando las siguientes URLs.

https://searchdns.netcraft.com/ - Define tu dominio en el campo host... y revisa los resultados que te deja obtener esta herramienta
https://sitereport.netcraft.com/?url=www.netcraft.com - Cambie la variable www.netcraft.com por el sitio del cuál deseas obtener información indexada en netcraft y cuéntanos tus resultados en **Telegram**

**Reconocimiento de Portales Web**

En este reconocimiento puedes realizar 2 técnicas, la primera bajar el sitio en local y revisarlo y la segunda revisar información de la cabecera del servidor web, para eso sigue los siguientes pasos:

1. Ejecuta el comando *wget --mirror --convert-links --page-requisites --no-parent -P documents/websites/ **https://algun-sitio.com***
2. Entiendes lo que pasa en este comando ? Este es un resumen
  - *--mirror* Realiza una descarga recursiva
  - *--convert-links* Convierte los links para que funcionen de manera local
  - *--page-requesites* Descarga los recursos necesarios para mostrar la pagina de manera correcta (imagenes, JS, CSS)
  - *--no-parent* Asegura que el directorio arriba de la jerarquía no sean usados
  - *-P /documents/websites/* la ruta donde se va a guardar el sitio web
 3. Otra información importante que pueden encontrar es la cabecera del servidor web con el comando *curl --head http://www.eltiempo.com* 

Cambia el sitio por el de tu elección y cuentanos tus resultados en **Telegram** de la ejecución de estos comandos

**traceroute y tcptraceroute

Es posible realizar trazas diferenciales con los comandos tradicionales por UDP o trazas TCP, para revisar la diferencia es posible ejecutar trazas contra objetivos con seguridad perimetral y revisar las diferencias. Un ejemplo de esto es realizar las siguientes pruebas con los comandos: *traceroute www.presidencia.gov.co* y *tcptraceroute www.presidencia.gov.co 80*

Quieres revisar todos los paquetes enviados y recibidos en un traceroute ? Utiliza el comando *nping --tr echo.nmap.org*

**Recon-ng v5

Esta excelente herramienta te puede permitir la integración de diferentes tareas de reconocimiento, así que aprendamos a usarla...

1. Desde tu línea de comando ejecuta el comando *recon-ng
2. Para obtener ayuda sobre la herramienta ejecuta el comando *help
3. La versión 5 de esta herramienta no incluye ningún módulo que es un gran cambio ante sus antecesoras 
4. Ejecuta el comando *options list* para ver las configuraciones generales de la herramienta, con el comando *options set* puedes cambiar dichas configuraciones
5. Al no tener módulos disponibles deberás instalar los necesarios usando el marketplace, para actualizar la lista de módulos ejecuta el comando *marketplace refresh*
6. Para ver los módulos disponibles ejecuta el comando *marketplace info all* para encontrar información de todos los módulos disponibles
7. El comando *marketplace search* te permitirá generar una lista de módulos disponibles
8. Puedes hacer búsquedas de módulos por su nombre por ejemplo con el comando *marketplace search hackertarget* en la información del módulo encontrarás si necesitas dependencias o llaves para ejecutar el módulo.
9. Instala este módulo con el comando *marketplace install recon/domains-hosts/hackertarget*
10. Para cargar el módulo ejecuta el comando *modules load recon/domains-hosts/hackertarget
11. Ejecuta el comando *info* para identificar información relacionada al dominio
12. La opción principal para la ejecución de este módulo es SOURCE, que es un dominio a buscar, para su configuración utiliza el comando *options set SOURCE dominio_elegido*
13. Revisa los resultados que puedes obtener de la ejecución de esta herramiento
14. Con el comando *show hosts* podrás encontrar la información recolectada por el módulo
15. Instala, ejecuta y obten información de un objetivo con el módulo discovery/info_disclosure/interesting_files
16. El uso de llaves para el consumo de APIs es una gran funcionalidad para esta herramienta, los módulos que necesitan una llave tienen un * en la columna K en su descripción. Para añadir una llave de autenticación se usa el comando *keys add nombre_de_la_llave llave*

Tienes preguntas ? Recuerda nuestro grupo en **Telegram**

**Censys

En **censys** puedes realizar diferentes tipos de búsquedas dependiendo de tus necesidades, desde búsquedas a los DNS, hasta rangos de direcciones o servicios específicos.

1. Accede al portal [Censys](https://search.censys.io)
2. Realiza la búsqueda *ip:45.33.49.119* puedes identificar a quién pertenece la dirección ?
3. Que puedes obtener con esta búsqueda ? *not 443.https.tls.validation.browser_trusted: true and location.country_code:CO
4. En esta etapa y con esta herramienta también es posible encontrar vulnerabilidades, por ejemplo con la búsqueda *443.https.heartbleed.heartbleed_vulnerable: true and location.country_code:CO*

Entiendes que encontraste ? Discutamos en **Telegram**

**Otras Herramientas**

[CheckUsernames](https://checkusernames.com/) - Búsqueda de nicknames en diferentes redes sociales
[BuiltWith](https://builtwith.com/) - Tecnologías usadas en un sitio web

Para qué puedes usar estas herramientas ? Discutamos en **Telegram** al respecto




